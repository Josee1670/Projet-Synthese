<main class="container">
  <div ngFor="let entreprise of entreprise">

    <!-- SECTION EN-TÊTE AVEC LE LOGO ET LE NOM DE L'ENTREPRISE - SG-->
    <img src="../../assets/img/mediavox.svg" alt="Logo de l'entreprise Mediavox.">
    <!-- @Julie Mettre le logo de l'entreprise - SG -->

    <!-- SECTION EN-TÊTE AVEC LE LOGO ET LE NOM DE L'ENTREPRISE - SG-->
        <img src="" alt="">  <!-- @Julie Mettre le logo de l'entreprise - SG -->
        <h4>Entreprise</h4>
    
    <!-- SECTION DE NOM DU CONTACT - SG -->
    <form #entrepriseForm ="ngForm">
          
        <mat-form-field *ngIf="(selectedEntreprise && selectedEntreprise === entreprise);else editDestination;" class="input-full-width">
            <input name="name" [(ngModel)]="entreprise.name" #name="ngModel" required type="text" matInput/>
            <mat-error *ngIf="name.invalid && (name.dirty || name.touched) && name.hasError('required')">Le nom de l'entreprise est obligatoire.</mat-error>
        </mat-form-field> 
            <ng-template #editDestination><h1>{{entreprise.name}}</h1></ng-template>
    
        <h4>Personne contact</h4>  
        <label for="Logo"></label>
        <input type="text" name="Logo">
        <button>Parcourir</button>
        
    <!-- SECTION DES BOUTONS - ÉDITER - SUPPRIMER - MISE À JOUR -->
    <!-- BOUTON DONE QUI RETOURNE À LA PAGE ENTREPRISE OU QUI VA DEVENIR ANNULER LORS DU CLICK POUR ÉDITER -->
        <ng-template #ANNULERButton>  
            <button mat-button routerLink="/entreprises"><i class="material-icons">done</i></button>
        </ng-template>  
        
     <!-- BOUTON DONE QUI VA DEVENIR ANNULER LORS DU CLICK SUR ÉDITER -->
        <button *ngIf="(selectedEntreprise && selectedEntreprise === entreprise);else ANNULERButton;" color="primary" form="entrepriseForm" routerLink="/entreprises" mat-button>
            Annuler
        </button>  
    <!-- ############################################################################################## --> 
    
    
    
    <!-- BOUTON MISE À JOUR QUI VA APPARAÎTRE LORS DU CLICK SUR ÉDITER -->    
        <button type="submit" *ngIf="(selectedEntreprise && selectedEntreprise === entreprise);else MAJButton;" (click)="onSave(entrepriseForm)" color="primary" mat-button > 
        <i class="material-icons">save</i> Mise à jour  </button>  
           
     <!-- BOUTON EDITE DE LA FICHE-ENTREPRISE VA DEVENIR MISE À JOUR LORSQUE QUE NOUS ALLONS ÉDITER UNE ENTREPRISE--> 
        <ng-template #MAJButton>
            <form (ngSubmit)="onSelect(entreprise)">
                <button type="submit"  mat-button><i class="material-icons">edit</i></button>
            </form>
        </ng-template>
     <!-- ############################################################################################## -->
    
    
    <!-- BOUTON SUPPRIMER DE LA FICHE-ENTREPRISE NE SERA PAS DISPONIBLE LORS DU CLICK SUR ÉDITE -->
        <ng-template #deleteButton>         
            <button (click)="openConfirmationDialog(entreprise)" mat-button ><i class="material-icons">delete</i></button>      
        </ng-template>  
        
    <!-- BOUTON DELETE QUI S'EFFACE LORS DU CLICK SUR ÉDITER -->
        <button *ngIf="(selectedEntreprise && selectedEntreprise === entreprise);else deleteButton;" color="primary" form="entrepriseFormEdition" mat-button> </button>  
    <!-- ############################################################################################## -->  
    
    
    
    <!-- DÉBUT DU FORMUALIRE -->
    <!-- SECTION DE LA COURTE PRÉSENTATION - SG -->
        <h2>Courte présentation</h2>          
            <mat-form-field *ngIf="(selectedEntreprise && selectedEntreprise === entreprise);else editDescription;" class="input-full-width">
                <textarea name="description" [(ngModel)]="entreprise.description" #description="ngModel" required type="text" matInput ></textarea>
                <mat-error *ngIf="description.invalid && (description.dirty || description.touched) && description.hasError('required')">La description est obligatoire.</mat-error>
            </mat-form-field>       
            <ng-template #editDescription><p>{{entreprise.description}}</p></ng-template>
    
    <!-- SECTION PERSONNE CONTACT NAME - SG -->
        <h4>Personne contact</h4>      
            <mat-form-field *ngIf="(selectedEntreprise && selectedEntreprise === entreprise);else editContactName;" class="input-full-width">
                <input name="contactName" [(ngModel)]="entreprise.contactName" #contactName="ngModel" required type="text" matInput/>
                <mat-error *ngIf="contactName.invalid && (contactName.dirty || contactName.touched) && contactName.hasError('required')">Le nom de la personne contact est obligatoire.</mat-error>  
            </mat-form-field>    
            <ng-template #editContactName><p>{{entreprise.contactName}}</p></ng-template>
    
    <!-- SECTION DES COORDONNÉES - SG -->
        <h4>Information personnelles</h4>    
    
    <!-- ADRESSE -->
        <h4>Adresse</h4>     
            <mat-form-field *ngIf="(selectedEntreprise && selectedEntreprise === entreprise);else editAddress;" class="input-full-width">
                <input name="address" [(ngModel)]="entreprise.address" #address="ngModel" required type="text" matInput/>
                 <mat-error *ngIf="address.invalid && (address.dirty || address.touched) && address.hasError('required')">L'adresse est obligatoire.</mat-error>  
            </mat-form-field>
            <ng-template #editAddress><p>{{entreprise.address}}</p></ng-template>
    
     <!-- TÉLÉPHONE -->   
        <h4>Téléphone</h4>    
            <mat-form-field *ngIf="(selectedEntreprise && selectedEntreprise === entreprise);else editContactPhone;" class="input-full-width">
                <input name="contactPhone" [(ngModel)]="entreprise.contactPhone" #contactPhone="ngModel" required type="text" matInput/>
                <mat-error *ngIf="contactPhone.invalid && (contactPhone.dirty || contactPhone.touched) && contactPhone.hasError('required')">Le numéro de téléphone.</mat-error>  
            </mat-form-field>    
            <ng-template #editContactPhone><p>{{entreprise.contactPhone}}</p></ng-template>
    
    <!-- VILLE -->   
         <h4>Ville</h4>  
        
            <mat-form-field *ngIf="(selectedEntreprise && selectedEntreprise === entreprise);else editCity;" class="input-full-width">
                <input name="city" [(ngModel)]="entreprise.city" #city="ngModel" required type="text" matInput/>
                <mat-error *ngIf="city.invalid && (city.dirty || city.touched) && city.hasError('required')">La ville est obligatoire.</mat-error>   
            </mat-form-field>     
            <ng-template #editCity><p>{{entreprise.city}}</p></ng-template>
    
    <!-- COURRIEL -->   
         <h4>Courriel</h4>   
            <mat-form-field *ngIf="(selectedEntreprise && selectedEntreprise === entreprise);else editContactEmail;" class="input-full-width">
                <input name="contactEmail" [(ngModel)]="entreprise.contactEmail" #contactEmail="ngModel" required type="email" matInput/>
                <mat-error *ngIf="contactEmail.invalid && (contactEmail.dirty || contactEmail.touched) && contactEmail.hasError('required')">Le courriel est obligatoire.</mat-error>  
            </mat-form-field>     
            <ng-template #editContactEmail><p>{{entreprise.contactEmail}}</p></ng-template>
    
    <!-- PROVINCE -->   
         <h4>Province</h4>      
            <mat-form-field *ngIf="(selectedEntreprise && selectedEntreprise === entreprise);else editProvince;" class="input-full-width">
                <input name="province" [(ngModel)]="entreprise.province" #province="ngModel" required type="text" matInput/>
                <mat-error *ngIf="province.invalid && (province.dirty || province.touched) && province.hasError('required')">La province est obligatoire.</mat-error>   
            </mat-form-field>     
            <ng-template #editProvince><p>{{entreprise.province}}</p></ng-template>
    
    <!-- CODE POSTAL -->   
         <h4>Code Postal</h4>       
             <mat-form-field *ngIf="(selectedEntreprise && selectedEntreprise === entreprise);else editCodePostal;" class="input-full-width">
                <input name="postalCode" [(ngModel)]="entreprise.postalCode" #postalCode="ngModel" required type="text" matInput/>
                <mat-error *ngIf="postalCode.invalid && (postalCode.dirty || postalCode.touched) && postalCode.hasError('required')">Le code postal est obligatoire.</mat-error> 
             </mat-form-field>     
            <ng-template #editCodePostal><p>{{entreprise.postalCode}}</p></ng-template>
    
            <!-- SECTION DES BOUTONS - ÉDITER - SUPPRIMER - MISE À JOUR -->
    <!-- BOUTON DONE QUI RETOURNE À LA PAGE ENTREPRISE OU QUI VA DEVENIR ANNULER LORS DU CLICK POUR ÉDITER -->
        <ng-template #ANNULERButton>  
            <button mat-button routerLink="/entreprises"><i class="material-icons">done</i></button>
        </ng-template>  
        
     <!-- BOUTON DONE QUI VA DEVENIR ANNULER LORS DU CLICK SUR ÉDITER -->
        <button *ngIf="(selectedEntreprise && selectedEntreprise === entreprise);else ANNULERButton;" color="primary" form="entrepriseForm" routerLink="/entreprises" mat-button>
            Annuler
        </button>  
    <!-- ############################################################################################## --> 
    
    
    
    <!-- BOUTON MISE À JOUR QUI VA APPARAÎTRE LORS DU CLICK SUR ÉDITER -->    
        <button type="submit" *ngIf="(selectedEntreprise && selectedEntreprise === entreprise);else MAJButton;" (click)="onSave(entrepriseForm)" color="primary" mat-button > 
        <i class="material-icons">save</i> Mise à jour  </button>  
           
     <!-- BOUTON EDITE DE LA FICHE-ENTREPRISE VA DEVENIR MISE À JOUR LORSQUE QUE NOUS ALLONS ÉDITER UNE ENTREPRISE--> 
        <ng-template #MAJButton>
            <form (ngSubmit)="onSelect(entreprise)">
                <button type="submit"  mat-button><i class="material-icons">edit</i></button>
            </form>
        </ng-template>
     <!-- ############################################################################################## -->
    
    
    <!-- BOUTON SUPPRIMER DE LA FICHE-ENTREPRISE NE SERA PAS DISPONIBLE LORS DU CLICK SUR ÉDITE -->
        <ng-template #deleteButton>         
            <button (click)="openConfirmationDialog(entreprise)" mat-button ><i class="material-icons">delete</i></button>      
        </ng-template>  
        
    <!-- BOUTON DELETE QUI S'EFFACE LORS DU CLICK SUR ÉDITER -->
        <button *ngIf="(selectedEntreprise && selectedEntreprise === entreprise);else deleteButton;" color="primary" form="entrepriseFormEdition" mat-button> </button>  
    <!-- ############################################################################################## -->  
      
        </form>
    
    </div>
        
